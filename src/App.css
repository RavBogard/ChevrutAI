/* Global Vars & Reset fixes */
:root {
  --primary-color: #1e40af;
  /* Deep Academic Blue (Slate/Blue 800) */
  --accent-color: #d97706;
  /* Amber/Gold Accent */

  /* Light Mode Defaults ("Modern Library") */
  --sidebar-bg: #f8fafc;
  /* Slate 50 */
  --sidebar-text: #334155;
  /* Slate 700 */
  --sheet-bg: #ffffff;
  --sheet-text: #0f172a;
  /* Slate 900 - High Contrast */

  --message-user-bg: #f1f5f9;
  /* Slate 100 */
  --message-user-text: #334155;
  --message-bot-bg: transparent;

  --border-color: #e2e8f0;
  /* Slate 200 */
  --input-bg: #ffffff;

  --font-ui: 'Inter', system-ui, -apple-system, sans-serif;
  --font-english-serif: 'Merriweather', 'Georgia', serif;
  --font-hebrew: 'Heebo', 'Arial Hebrew', sans-serif;
  /* Modern, highly readable Israeli Hebrew font */

  --source-bg: #ffffff;
}

body.dark-mode {
  --primary-color: #60a5fa;
  /* Blue 400 for contrast on dark */
  --sidebar-bg: #0f172a;
  /* Slate 900 */
  --sidebar-text: #e2e8f0;
  /* Slate 200 */
  --sheet-bg: #020617;
  /* Slate 950 - Deep dark */
  --sheet-text: #f8fafc;
  /* Slate 50 */
  --source-bg: #1e293b;
  /* Slate 800 */
  --border-color: #334155;
  /* Slate 700 */
  --input-bg: #1e293b;

  --message-user-bg: #1e293b;
  --message-user-text: #f8fafc;
}

body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  font-family: var(--font-ui);
  -webkit-font-smoothing: antialiased;
  /* Crisp text */
  transition: background-color 0.3s, color 0.3s;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--font-english-serif);
  /* Use the loved serif for ALL headings */
  font-weight: 700;
}

.app-container {
  display: flex;
  width: 100vw;
  height: 100vh;
  background-color: var(--sidebar-bg);
  /* Match sidebar */
  color: var(--sheet-text);
  overflow: hidden;
}

/* Chat Sidebar */
.chat-sidebar {
  width: 100%;
  /* Fill the resizable container */
  height: 100%;
  background-color: var(--sidebar-bg);
  color: var(--sidebar-text);
  display: flex;
  flex-direction: column;
  border-right: none;
  /* Border moved to resizer */
  /* box-shadow handled by container if needed, or remove */
  z-index: 10;
}

.resizer {
  width: 4px;
  /* Thin clickable area */
  cursor: col-resize;
  background-color: var(--border-color);
  transition: background-color 0.2s;
  z-index: 20;
}

.resizer:hover,
.resizer:active {
  background-color: var(--primary-color);
  width: 4px;
}

.chat-header {
  padding: 0.75rem 1.5rem;
  /* Reduced vertical padding */
  border-bottom: 1px solid var(--border-color);
  background: var(--sidebar-bg);
  /* Solid bg */
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* Removed old header styles for cleaner look */
.header-top-row {
  display: flex;
  width: 100%;
  justify-content: space-between;
  align-items: center;
}

.header-controls {
  display: flex;
  gap: 0.5rem;
}

.messages-list {
  flex: 1;
  overflow-y: auto;
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  /* More breathing room */
}

/* Message Bubbles */
.message {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  max-width: 100%;
}

.message.user {
  align-items: flex-end;
}

.message.user .message-content {
  background-color: var(--message-user-bg);
  color: var(--message-user-text);
  padding: 0.8rem 1.2rem;
  border-radius: 18px;
  border-top-right-radius: 4px;
  max-width: 85%;
  font-size: 0.95rem;
  line-height: 1.5;
}

.message.model {
  align-items: flex-start;
}

.message.model .message-content {
  background: transparent;
  color: var(--sidebar-text);
  padding: 0;
  max-width: 100%;
  font-size: 0.95rem;
  line-height: 1.6;
}

/* Source Suggestion Cards - "Artifact" Style */
.suggested-sources {
  margin-top: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.suggested-sources h4 {
  margin: 0 0 0.5rem 0;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  opacity: 0.7;
}

.source-suggestion-card {
  background: var(--sheet-bg);
  /* Contrast with sidebar */
  border: 1px solid var(--border-color);
  border-left: 3px solid var(--primary-color);
  border-radius: 8px;
  padding: 0.8rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  overflow: hidden;
  transition: transform 0.2s, box-shadow 0.2s;
  color: var(--sheet-text);
}

.source-suggestion-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.source-info strong {
  display: block;
  font-size: 0.95rem;
  margin-bottom: 0.2rem;
  color: var(--primary-color);
}

.source-summary {
  font-size: 0.85rem;
  opacity: 0.9;
  line-height: 1.4;
  display: block;
}

.add-source-btn {
  align-self: flex-start;
  margin-top: 0.5rem;
  background-color: var(--primary-color);
  color: white;
  border: none;
  border-radius: 6px;
  padding: 0.4rem 0.8rem;
  font-size: 0.8rem;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.4rem;
  transition: background 0.2s;
}

.add-source-btn:hover {
  background-color: #2563eb;
}

/* Chat Input */
.chat-input-container {
  padding: 1rem 1.5rem 1.5rem 1.5rem;
  background-color: var(--sidebar-bg);
  flex-shrink: 0;
  position: relative;
  z-index: 20;
}

.chat-textarea {
  box-sizing: border-box;
  /* Critical for padding */
  width: 100%;
  min-height: 120px;
  max-height: 300px;
  padding: 14px 16px 44px 16px;
  border-radius: 12px;
  border: 1px solid var(--border-color);
  background-color: var(--input-bg);
  color: var(--sidebar-text);
  font-family: inherit;
  font-size: 0.95rem;
  line-height: 1.5;
  resize: none;
  outline: none;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  transition: border-color 0.2s, box-shadow 0.2s;
  overflow: hidden;
  /* Hide scrollbars initially */
}

.chat-textarea:not([style*="height: auto"]) {
  overflow-y: auto;
  /* Show when exceeding max-height */
}

.chat-textarea:focus {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

.chat-textarea::placeholder {
  color: #9ca3af;
  opacity: 0.8;
}

.send-button {
  position: absolute;
  left: 28px;
  /* Adjust for padding */
  bottom: 28px;
  /* Adjust for padding */
}

/* Empty State Prompts */
.empty-prompts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.25rem;
  margin: 3rem auto 0 auto;
  width: 100%;
  max-width: 900px;
}

.prompt-card {
  background-color: var(--sheet-bg);
  /* Use sheet bg (white/dark) */
  border: 1px solid var(--border-color);
  color: var(--sheet-text);
  padding: 1.5rem;
  border-radius: 16px;
  cursor: pointer;
  text-align: left;
  transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
  line-height: 1.5;
  height: 100%;
  /* Fill grid cell */
  border-left: 4px solid transparent;
  /* Prepare for hover */
}

.prompt-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  border-color: var(--primary-color);
  border-left-color: var(--primary-color);
}

.prompt-icon {
  font-size: 1.5rem;
  background: var(--input-bg);
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  flex-shrink: 0;
}

/* Dark Mode Specific Overrides for Sidebar items */
body.dark-mode .source-suggestion-card {
  background: #1f2937;
  /* Lighter than sidebar #111 */
  border-color: #374151;
}

/* Init Theme Toggle */
.initial-theme-toggle {
  background: transparent;
  color: var(--sheet-text);
  border: 1px solid var(--border-color);
}

.initial-theme-toggle:hover {
  background: rgba(125, 125, 125, 0.1);
}

/* Theme Toggle Button Update */
.theme-toggle-btn {
  background: transparent;
  border: 1px solid transparent;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #9ca3af;
  transition: all 0.2s;
}

.theme-toggle-btn:hover {
  background-color: rgba(255, 255, 255, 0.1);
  color: #f3f4f6;
}

body.dark-mode .prompt-card {
  background-color: #1f2937;
  /* Lighter than sheet bg */
  border-color: #374151;
}

body.dark-mode .prompt-card:hover {
  background-color: #374151;
}

/* Improved Loading Indicator */
.loading-indicator {
  padding: 1rem;
  background-color: var(--message-bot-bg);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  border-bottom-left-radius: 2px;
  align-self: flex-start;
  color: #9ca3af;
  font-size: 0.9rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  animation: fadeIn 0.3s ease;
}

.typing-dots {
  display: flex;
  gap: 4px;
}

.typing-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background-color: #9ca3af;
  animation: typing 1.4s infinite ease-in-out both;
}

.typing-dot:nth-child(1) {
  animation-delay: -0.32s;
}

.typing-dot:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes typing {

  0%,
  80%,
  100% {
    transform: scale(0);
    opacity: 0.5;
  }

  40% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Sheet View */
.sheet-view {
  flex: 1;
  background-color: var(--sheet-bg);
  color: var(--sheet-text);
  overflow-y: auto;
  padding: 2rem 4rem;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.sheet-header {
  text-align: center;
  margin-bottom: 3rem;
  border-bottom: 2px solid #e5e7eb;
  padding-bottom: 1rem;
  width: 100%;
  max-width: 900px;
}

.sheet-header h1 {
  font-family: var(--font-english-serif);
  font-size: 2.5rem;
  color: #111827;
  margin: 0;
}

.sheet-meta {
  color: #6b7280;
  font-style: italic;
  margin-top: 0.5rem;
}

.sheet-paper {
  width: 100%;
  max-width: 900px;
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.empty-state {
  text-align: center;
  color: #9ca3af;
  margin-top: 4rem;
  font-size: 1.1rem;
}

/* Source Block */
.source-block {
  background: var(--source-bg);
  color: var(--sheet-text);
  /* subtle visual separation if background is not white, but here bg is white. 
     Let's add a left border or subtle shadow for block distinction */
  border-left: 4px solid var(--primary-color);
  padding: 1rem 1.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
  border-radius: 0 8px 8px 0;
  transition: all 0.2s;
}

.source-block:hover {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

.source-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  border-bottom: 1px solid #f3f4f6;
  padding-bottom: 0.5rem;
}

.source-header h3 {
  margin: 0;
  font-family: var(--font-english-serif);
  color: var(--primary-color);
  font-size: 1.2rem;
}

.source-controls {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

.view-toggle {
  padding: 0.3rem;
  border-radius: 4px;
  border: 1px solid var(--border-color);
  font-size: 0.8rem;
  color: var(--sheet-text);
  background-color: var(--source-bg);
}

.remove-btn {
  background: transparent;
  color: #9ca3af;
  border: none;
  font-size: 1.2rem;
  line-height: 1;
  padding: 0 0.4rem;
}

.remove-btn:hover {
  color: #ef4444;
  background: transparent;
}

.source-content {
  display: flex;
  gap: 2rem;
  font-size: 1.1rem;
  line-height: 1.6;
}

.text-eng,
.text-heb {
  flex: 1;
}

.text-eng {
  font-family: var(--font-english-serif);
}

.text-heb {
  font-family: var(--font-hebrew);
  text-align: right;
  font-size: 1.45rem;
  /* Larger for Siddur-like readability */
  line-height: 1.6;
}

/* View Modes */
.view-english .text-heb {
  display: none;
}

.view-hebrew .text-eng {
  display: none;
}

/* Responsive */
/* Mobile Layout (<768px) */
@media (max-width: 768px) {
  .app-container {
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
  }

  /* Sheet View takes full screen */
  .sheet-view {
    height: 100%;
    width: 100%;
    padding: 1rem;
    overflow-y: auto;
    padding-bottom: 80px;
    /* Space for FAB */
  }

  /* Compact Logo Header for Mobile (Optional: If you want a header on the sheet view on mobile)
     Currently the sidebar is hidden, so we might want a small logo on the SheetView or just rely on the Chat header when opened.
     The user requirement says "Compact header with small logo". 
     Since the sidebar is now hidden, the logo is hidden too. 
     We should probably ensure the Sheet View has some branding or the sidebar header acts as a persistent top bar?
     
     The user said: "Compact header with small logo + hamburger menu" (or similar).
     However, the chat IS the sidebar.
     
     Let's implement the Bottom Sheet Chat approach logic.
  */

  /* Hide sidebar by default on mobile */
  .chat-sidebar {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 85vh;
    /* Cover most of height */
    max-height: 85vh;
    background-color: var(--sidebar-bg);
    z-index: 100;
    border-radius: 20px 20px 0 0;
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.4);
    transform: translateY(110%);
    /* Hidden */
    transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    border-right: none;
    display: flex;
    /* Override previous styles if needed */
  }

  .chat-sidebar.mobile-open {
    transform: translateY(0);
  }

  /* Chat Header Mobile Adjustments */
  .chat-header {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }

  .header-top-row {
    display: flex;
    width: 100%;
    justify-content: space-between;
    align-items: center;
  }

  /* Reduce Logo Size significantly */
  .sidebar-logo {
    max-height: 40px !important;
    min-height: 0;
    width: auto;
    padding-right: 0;
    margin-bottom: 0;
  }

  .header-controls {
    position: static;
    background: transparent;
    padding: 0;
  }

  /* Mobile Close Button */
  .mobile-close-btn {
    display: block;
    background: none;
    border: none;
    color: #9ca3af;
    font-size: 2rem;
    cursor: pointer;
    padding: 0 0.5rem;
  }

  .mobile-chat-fab {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background-color: var(--primary-color);
    color: white;
    border: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    z-index: 90;
    cursor: pointer;
    transition: transform 0.2s;
  }

  .mobile-chat-fab:active {
    transform: scale(0.95);
  }

  .mobile-chat-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 95;
    backdrop-filter: blur(2px);
    animation: fadeBackdrop 0.3s;
  }

  /* Adjust typography for mobile */
  .sheet-header h1 {
    font-size: 1.8rem;
  }

  .title-input {
    font-size: 1.8rem;
  }

  .source-content {
    flex-direction: column;
    gap: 1rem;
  }

  .text-heb {
    order: 1;
    text-align: right;
  }

  .text-eng {
    order: 2;
  }
}

/* Desktop styles for new elements */
@media (min-width: 769px) {

  .mobile-chat-fab,
  .mobile-close-btn,
  .mobile-chat-backdrop {
    display: none !important;
  }
}

@keyframes fadeBackdrop {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

/* Drag and Drop & Export Styles */

.header-actions {
  margin-top: 1rem;
}

.export-btn {
  background-color: var(--primary-color);
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
  transition: opacity 0.2s;
}

.google-btn {
  background: #4285F4;
  /* Google Blue */
  margin-right: 0.5rem;
}

.google-btn:disabled {
  background: #a0c3ff;
  cursor: not-allowed;
}

.export-btn:hover {
  background-color: #2563eb;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 0.8rem;
}

.drag-handle {
  touch-action: none;
  cursor: grab;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.2rem;
  border-radius: 4px;
  transition: background 0.2s;
}

.drag-handle:hover {
  background-color: #f3f4f6;
}

.drag-handle:active {
  cursor: grabbing;
}

.source-header h3 {
  margin: 0;
}

.sortable-item {
  /* Allow scrolling on the item itself */
  touch-action: manipulation;
}

/* Text Logo */
.sidebar-logo-text {
  display: flex;
  align-items: center;
  font-size: 2rem;
  /* Larger as requested */
  line-height: 1;
  gap: 2px;
  user-select: none;
  cursor: pointer;
  padding-right: 1rem;
  /* breathing room */
}

.logo-serif {
  font-family: var(--font-english-serif);
  font-weight: 700;
  color: var(--sidebar-text);
  letter-spacing: -0.01em;
}

.logo-sans {
  font-family: var(--font-ui);
  font-weight: 700;
  background: linear-gradient(90deg, #4285F4, #9B72CB, #D96570);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-right: 4px;
}

.logo-sparkle {
  display: flex;
  align-items: center;
  margin-top: -6px;
  /* Lift star */
}

/* Central Big Logo */
.central-logo-text {
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 4.5rem;
  margin-bottom: 1rem;
  user-select: none;
}

.central-logo-text .logo-serif {
  font-family: var(--font-english-serif);
  /* Consistent brand font */
  color: var(--sheet-text);
  /* Adapt to theme */
}

.central-logo-text .logo-sparkle svg {
  width: 48px;
  height: 48px;
}

.central-logo-text .logo-hebrew {
  font-family: var(--font-hebrew);
  font-weight: 700;
  direction: rtl;
}


/* Title Input & Export Links */
.sheet-controls-row {
  display: flex;
  justify-content: center;
  width: 100%;
  margin-bottom: 1.5rem;
}

.sheet-divider-line {
  border-bottom: 1px solid var(--border-color);
  width: 100%;
  max-width: 800px;
  margin: 0 auto 2rem auto;
}

.title-input {
  font-family: 'Frank Ruhl Libre', serif;
  font-size: 3rem;
  /* Even larger title */
  color: var(--sheet-text);
  text-align: center;
  border: none;
  border-bottom: 2px solid transparent;
  background: transparent;
  width: 100%;
  max-width: 900px;
  outline: none;
  padding: 0.5rem;
  transition: border-color 0.2s;
  margin-bottom: 0;
  /* Reduced from 1rem */
}

.title-input:focus {
  border-bottom-color: var(--primary-color);
}

.export-success-msg {
  margin: 1rem 0;
  padding: 1rem;
  background-color: #ecfdf5;
  border: 1px solid #10b981;
  border-radius: 8px;
  animation: fadeIn 0.5s;
}

.open-doc-link {
  color: #059669;
  font-weight: bold;
  font-size: 1.1rem;
  text-decoration: none;
}

.open-doc-link:hover {
  text-decoration: underline;
}

/* Central Input (SheetView Empty State) */
.central-hero {
  text-align: center;
  margin-bottom: 2rem;
  width: 100%;
  max-width: 800px;
  margin: 0 auto 3rem auto;
}

.central-hero h2 {
  font-family: var(--font-ui);
  /* Use sans-serif like Gemini */
  font-size: 3rem;
  /* Larger greeting */
  font-weight: 500;
  margin-bottom: 0.5rem;
  color: #444746;
  /* Gemini dark gray */
  background: linear-gradient(90deg, #4285F4, #9B72CB, #D96570);
  /* Subtle gradient text? Optional, maybe keep simple */
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  display: inline-block;
  letter-spacing: -0.02em;
}

body.dark-mode .central-hero h2 {
  background: linear-gradient(90deg, #8AB4F8, #C58AF9, #F28B82);
  -webkit-background-clip: text;
}

.central-hero p {
  font-size: 1.25rem;
  color: #5f6368;
  margin-bottom: 2.5rem;
  font-weight: 300;
}

body.dark-mode .central-hero p {
  color: #9aa0a6;
}

.central-input-wrapper {
  position: relative;
  width: 100%;
  max-width: 900px;
  margin: 0 auto;
}

.central-textarea {
  width: 100%;
  min-height: 56px;
  padding: 18px 56px 18px 24px;
  border-radius: 28px;
  /* Pill-ish but expandable */
  border: 1px solid #e0e0e0;
  background-color: #f0f4f9;
  /* Gemini light gray input */
  color: #1f1f1f;
  font-family: inherit;
  font-size: 1.1rem;
  line-height: 1.5;
  resize: none;
  outline: none;
  transition: background-color 0.2s, box-shadow 0.2s;
  overflow: hidden;
  box-shadow: none;
}

.central-textarea:focus {
  background-color: white;
  box-shadow: 0 1px 6px rgba(32, 33, 36, 0.28);
  border-color: transparent;
}

.central-textarea::placeholder {
  color: #5f6368;
  opacity: 0.8;
}

body.dark-mode .central-textarea {
  background-color: #1e1f20;
  border-color: #444746;
  color: #e3e3e3;
}

body.dark-mode .central-textarea:focus {
  background-color: #282a2c;
  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.5);
}

.send-button {
  position: absolute;
  left: 12px;
  bottom: 12px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background-color: var(--primary-color);
  color: white;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 0.2s, background-color 0.2s;
  z-index: 10;
}

.send-button svg {
  width: 20px;
  height: 20px;
}

.central-send-btn {
  position: absolute;
  right: 12px;
  bottom: 8px;
  /* Anchor to bottom for multi-line support */
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background-color: transparent;
  color: #5f6368;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.2s;
}

.central-send-btn svg {
  width: 24px;
  height: 24px;
}

.central-send-btn:disabled {
  background-color: #9ca3af;
  opacity: 0.7;
  cursor: not-allowed;
}

.central-send-btn:not(:disabled):hover {
  background-color: rgba(31, 31, 31, 0.08);
  color: #1f1f1f;
}

body.dark-mode .central-send-btn {
  color: #e3e3e3;
}

body.dark-mode .central-send-btn:not(:disabled):hover {
  background-color: rgba(227, 227, 227, 0.08);
}

/* Ensure padding doesn't break width */
.chat-textarea,
.central-textarea {
  box-sizing: border-box;
}

/* Gemini-style Suggestion Cards (Grid Layout) */
.empty-prompts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1rem;
  margin: 3rem auto 0 auto;
  width: 100%;
  max-width: 800px;
}

.prompt-card {
  background-color: #f0f4f9;
  /* Solid fill for better button affordance */
  border: 1px solid transparent;
  color: #1f1f1f;
  padding: 1.5rem;
  /* Larger padding */
  border-radius: 12px;
  cursor: pointer;
  text-align: left;
  transition: all 0.2s cubic-bezier(0.2, 0.0, 0, 1.0);
  font-size: 1.15rem;
  /* Larger text */
  font-weight: 500;
  line-height: 1.4;
  display: flex;
  align-items: center;
  min-height: 100px;
  /* Taller */
  position: relative;
  overflow: hidden;
}

.prompt-card:hover {
  background-color: #e2e7eb;
  /* Distinct hover state */
  border-color: transparent;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
}

/* Remove old Icon styles */
.prompt-icon {
  display: none;
}

body.dark-mode .prompt-card {
  background-color: #1e1f20;
  border-color: #444746;
  color: #e3e3e3;
}

body.dark-mode .prompt-card:hover {
  background-color: #282a2c;
  border-color: #5f6368;
}

.prompt-card span:nth-child(2) {
  font-weight: normal;
  /* Reset if needed */
}

/* Export Dropdown */
.export-menu-container {
  position: relative;
  display: inline-block;
}

.export-main-btn {
  background-color: var(--primary-color);
  color: white;
  border: none;
  padding: 0.6rem 1.2rem;
  border-radius: 6px;
  cursor: pointer;
  font-family: inherit;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: background-color 0.2s;
}

.export-main-btn:hover {
  background-color: #2563eb;
}

.export-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 0.5rem;
  background-color: white;
  min-width: 180px;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  border-radius: 6px;
  border: 1px solid #e5e7eb;
  z-index: 50;
  overflow: hidden;
  animation: fadeIn 0.15s ease-out;
}

.export-dropdown button {
  display: block;
  width: 100%;
  padding: 0.75rem 1rem;
  text-align: left;
  background: none;
  border: none;
  color: #374151;
  font-size: 0.9rem;
  cursor: pointer;
  transition: background-color 0.1s;
}

.footer-legal {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.8rem;
  color: #9ca3af;
}

.version-tag {
  color: #6b7280;
}

.empty-content-msg {
  padding: 1rem;
  background-color: #f9fafb;
  border: 1px dashed #d1d5db;
  border-radius: 6px;
  color: #6b7280;
  font-style: italic;
  text-align: center;
  margin-bottom: 0.5rem;
}

/* Initial Toggles Container */
.initial-toggles {
  position: fixed;
  top: 1.5rem;
  right: 1.5rem;
  display: flex;
  gap: 0.75rem;
  z-index: 100;
  direction: ltr;
  /* Prevent button swap in RTL mode */
}

.initial-theme-toggle {
  background: transparent;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #5f6368;
  transition: background-color 0.2s;
  position: static;
}

body.dark-mode .initial-theme-toggle {
  color: #e3e3e3;
}

.initial-theme-toggle:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

body.dark-mode .initial-theme-toggle:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

html[dir="rtl"] .prompt-card,
html[dir="rtl"] .sheet-header,
html[dir="rtl"] .source-block {
  /* Usually RTL default is fine, but check text alignment */
  /* text-align: right; is default for RTL. */
}

html[dir="rtl"] .prompt-card {
  text-align: right;
}
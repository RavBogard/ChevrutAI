/* Global Vars & Reset fixes */
:root {
  --primary-color: #1e40af;
  /* Deep Academic Blue (Slate/Blue 800) */
  --accent-color: #d97706;
  /* Amber/Gold Accent */

  /* Light Mode Defaults ("Modern Library") */
  --sidebar-bg: #f8fafc;
  /* Slate 50 */
  --sidebar-text: #334155;
  /* Slate 700 */
  --sheet-bg: #ffffff;
  --sheet-text: #0f172a;
  /* Slate 900 - High Contrast */

  --message-user-bg: #f1f5f9;
  /* Slate 100 */
  --message-user-text: #334155;
  --message-bot-bg: transparent;

  --border-color: #e2e8f0;
  /* Slate 200 */
  --input-bg: #ffffff;

  --font-ui: 'Inter', system-ui, -apple-system, sans-serif;
  --font-english-serif: 'Merriweather', 'Georgia', serif;
  --font-hebrew: 'Heebo', 'Arial Hebrew', sans-serif;
  /* Modern, highly readable Israeli Hebrew font */

  --source-bg: #ffffff;
}

[data-theme='dark'] {
  --primary-color: #60a5fa;
  /* Blue 400 for contrast on dark */
  --sidebar-bg: #0f172a;
  /* Slate 900 */
  --sidebar-text: #e2e8f0;
  /* Slate 200 */
  --sheet-bg: #020617;
  /* Slate 950 - Deep dark */
  --sheet-text: #f8fafc;
  /* Slate 50 */
  --source-bg: #1e293b;
  /* Slate 800 */
  --border-color: #334155;
  /* Slate 700 */
  --input-bg: #1e293b;

  --message-user-bg: #1e293b;
  --message-user-text: #f8fafc;
}

body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  font-family: var(--font-ui);
  -webkit-font-smoothing: antialiased;
  /* Crisp text */
  transition: background-color 0.3s, color 0.3s;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--font-english-serif);
  /* Use the loved serif for ALL headings */
  font-weight: 700;
}

.app-container {
  display: flex;
  width: 100vw;
  height: 100vh;
  background-color: var(--sidebar-bg);
  /* Match sidebar */
  color: var(--sheet-text);
  overflow: hidden;
}

/* Chat Sidebar */
.chat-sidebar {
  width: 100%;
  /* Fill the resizable container */
  height: 100%;
  background-color: var(--sidebar-bg);
  color: var(--sidebar-text);
  display: flex;
  flex-direction: column;
  border-right: none;
  /* Border moved to resizer */
  /* box-shadow handled by container if needed, or remove */
  z-index: 10;
}

/* On mobile, sidebar needs a transparent background if it's acting as a drawer */
@media (max-width: 768px) {
  .chat-sidebar {
    background-color: var(--sidebar-bg);
    /* Ensure opaque */
  }
}

.resizer {
  width: 4px;
  /* Thin clickable area */
  cursor: col-resize;
  background-color: var(--border-color);
  transition: background-color 0.2s;
  z-index: 20;
}

.resizer:hover,
.resizer:active {
  background-color: var(--primary-color);
  width: 4px;
}

.chat-header {
  padding: 1rem 1rem 0.5rem 1rem;
  border-bottom: 1px solid var(--border-color);
  background: var(--sidebar-bg);
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

/* Removed old header styles for cleaner look */
.header-top-row {
  display: flex;
  width: 100%;
  justify-content: space-between;
  align-items: center;
}

.header-controls {
  display: flex;
  gap: 0.5rem;
}

.messages-list {
  flex: 1;
  overflow-y: auto;
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  min-height: 0;
  /* Critical for flex overflow scrolling */
}

/* Message Bubbles */
.message {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  max-width: 100%;
}

.message.user {
  align-items: flex-end;
}

.message.user .message-content {
  background-color: var(--message-user-bg);
  color: var(--message-user-text);
  padding: 0.8rem 1.2rem;
  border-radius: 18px;
  border-top-right-radius: 4px;
  max-width: 85%;
  font-size: 0.95rem;
  line-height: 1.5;
}

.message.model {
  align-items: flex-start;
}

.message.model .message-content {
  background: transparent;
  color: var(--sidebar-text);
  padding: 0;
  max-width: 100%;
  font-size: 0.95rem;
  line-height: 1.6;
}

/* Source Suggestion Cards - "Artifact" Style */
.suggested-sources {
  margin-top: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.suggested-sources h4 {
  margin: 0 0 0.5rem 0;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  opacity: 0.7;
}

.source-suggestion-card {
  background: var(--sheet-bg);
  /* Contrast with sidebar */
  border: 1px solid var(--border-color);
  border-left: 3px solid var(--primary-color);
  border-radius: 8px;
  padding: 0.8rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  overflow: hidden;
  transition: transform 0.2s, box-shadow 0.2s;
  color: var(--sheet-text);
}

.source-suggestion-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.source-info strong {
  display: block;
  font-size: 0.95rem;
  margin-bottom: 0.2rem;
  color: var(--primary-color);
}

.source-summary {
  font-size: 0.85rem;
  opacity: 0.9;
  line-height: 1.4;
  display: block;
}

.add-source-btn {
  align-self: flex-start;
  margin-top: 0.5rem;
  background-color: var(--primary-color);
  color: white;
  border: none;
  border-radius: 6px;
  padding: 0.4rem 0.8rem;
  font-size: 0.8rem;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.4rem;
  transition: background 0.2s;
}

.add-source-btn:hover {
  background-color: #2563eb;
}

.add-source-btn.added {
  background-color: #10b981;
  /* Green-500 */
  cursor: default;
  opacity: 0.9;
}

.add-source-btn.added:hover {
  background-color: #10b981;
}

.add-source-btn.added svg {
  margin-right: 4px;
}

/* Chat Input */
.chat-input-container {
  padding: 1rem 1.5rem 1.5rem 1.5rem;
  background-color: var(--sidebar-bg);
  flex-shrink: 0;
  position: relative;
  z-index: 20;
}

.chat-textarea {
  box-sizing: border-box;
  width: 100%;
  min-height: 225px;
  /* 50% larger */
  max-height: 500px;
  padding: 18px 20px 52px 20px;
  border-radius: 14px;
  border: 1px solid var(--border-color);
  background-color: var(--input-bg);
  color: var(--sidebar-text);
  font-family: var(--font-ui);
  font-size: 1rem;
  line-height: 1.6;
  resize: vertical;
  outline: none;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  transition: border-color 0.2s, box-shadow 0.2s, min-height 0.2s ease;
  overflow-y: auto;
}

.chat-textarea:focus {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.15);
}

.chat-textarea::placeholder {
  color: #9ca3af;
  opacity: 0.8;
}

.send-button {
  position: absolute;
  left: 28px;
  /* Adjust for padding */
  bottom: 28px;
  /* Adjust for padding */
}

/* Empty State Prompts */
.empty-prompts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.25rem;
  margin: 3rem auto 0 auto;
  width: 100%;
  max-width: 900px;
}

.prompt-card {
  background-color: var(--sheet-bg);
  /* Use sheet bg (white/dark) */
  border: 1px solid var(--border-color);
  color: var(--sheet-text);
  padding: 1.5rem;
  border-radius: 16px;
  cursor: pointer;
  text-align: left;
  transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
  line-height: 1.5;
  height: 100%;
  /* Fill grid cell */
  border-left: 4px solid transparent;
  /* Prepare for hover */
}

.prompt-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  border-color: var(--primary-color);
  border-left-color: var(--primary-color);
}

.prompt-icon {
  font-size: 1.5rem;
  background: var(--input-bg);
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  flex-shrink: 0;
}

/* Dark Mode Specific Overrides for Sidebar items */
[data-theme='dark'] .source-suggestion-card {
  background: #1f2937;
  /* Lighter than sidebar #111 */
  border-color: #374151;
}

/* Init Theme Toggle */
.initial-theme-toggle {
  background: transparent;
  color: var(--sheet-text);
  border: 1px solid var(--border-color);
}

.initial-theme-toggle:hover {
  background: rgba(125, 125, 125, 0.1);
}

/* Theme Toggle Button Update */
.theme-toggle-btn {
  background: transparent;
  border: 1px solid transparent;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #9ca3af;
  transition: all 0.2s;
}

.theme-toggle-btn:hover {
  background-color: rgba(255, 255, 255, 0.1);
  color: #f3f4f6;
}

[data-theme='dark'] .prompt-card {
  background-color: #1f2937;
  /* Lighter than sheet bg */
  border-color: #374151;
}

[data-theme='dark'] .prompt-card:hover {
  background-color: #374151;
}

/* Improved Loading Indicator */
.loading-indicator {
  padding: 1rem;
  background-color: var(--message-bot-bg);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  border-bottom-left-radius: 2px;
  align-self: flex-start;
  color: #9ca3af;
  font-size: 0.9rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  animation: fadeIn 0.3s ease;
}

.typing-dots {
  display: flex;
  gap: 4px;
}

.typing-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background-color: #9ca3af;
  animation: typing 1.4s infinite ease-in-out both;
}

.typing-dot:nth-child(1) {
  animation-delay: -0.32s;
}

.typing-dot:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes typing {

  0%,
  80%,
  100% {
    transform: scale(0);
    opacity: 0.5;
  }

  40% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Sheet View */
.sheet-view {
  flex: 1;
  background-color: var(--sheet-bg);
  color: var(--sheet-text);
  overflow-y: auto;
  padding: 2rem 4rem;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.sheet-header {
  text-align: center;
  margin-bottom: 3rem;
  border-bottom: 2px solid #e5e7eb;
  padding-bottom: 1rem;
  width: 100%;
  max-width: 900px;
}

.sheet-header h1 {
  font-family: var(--font-english-serif);
  font-size: 2.5rem;
  color: #111827;
  margin: 0;
}

.sheet-meta {
  color: #6b7280;
  font-style: italic;
  margin-top: 0.5rem;
}

.sheet-paper {
  width: 100%;
  max-width: 900px;
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.empty-state {
  text-align: center;
  color: #9ca3af;
  margin-top: 4rem;
  font-size: 1.1rem;
}

/* Source Block */
.source-block {
  background: var(--source-bg);
  color: var(--sheet-text);
  /* subtle visual separation if background is not white, but here bg is white. 
     Let's add a left border or subtle shadow for block distinction */
  border-left: 4px solid var(--primary-color);
  padding: 1rem 1.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
  border-radius: 0 8px 8px 0;
  transition: all 0.2s;
}

.source-block:hover {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

.source-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  border-bottom: 1px solid #f3f4f6;
  padding-bottom: 0.5rem;
}

.source-header h3 {
  margin: 0;
  font-family: var(--font-english-serif);
  color: var(--primary-color);
  font-size: 1.2rem;
}

.source-controls {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

.view-toggle {
  padding: 0.3rem;
  border-radius: 4px;
  border: 1px solid var(--border-color);
  font-size: 0.8rem;
  color: var(--sheet-text);
  background-color: var(--source-bg);
}

.remove-btn {
  background: transparent;
  color: #9ca3af;
  border: none;
  font-size: 1.2rem;
  line-height: 1;
  padding: 0 0.4rem;
}

.remove-btn:hover {
  color: #ef4444;
  background: transparent;
}

.source-content {
  display: flex;
  gap: 2rem;
  font-size: 1.1rem;
  line-height: 1.6;
}

.text-eng,
.text-heb {
  flex: 1;
}

.text-eng {
  font-family: var(--font-english-serif);
}

.text-heb {
  font-family: var(--font-hebrew);
  text-align: right;
  font-size: 1.45rem;
  /* Larger for Siddur-like readability */
  line-height: 1.6;
}

/* View Modes */
.view-english .text-heb {
  display: none;
}

.view-hebrew .text-eng {
  display: none;
}

/* Responsive */
/* Mobile Layout (<768px) */
@media (max-width: 768px) {

  html,
  body {
    overflow-x: hidden;
    max-width: 100vw;
  }

  .app-container {
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
    max-width: 100vw;
  }

  /* Sheet View takes full screen */
  .sheet-view {
    height: 100%;
    width: 100%;
    max-width: 100vw;
    padding: 1rem;
    overflow-x: hidden;
    overflow-y: auto;
    padding-bottom: 80px;
    box-sizing: border-box;
    /* Space for FAB */
  }

  /* Compact Logo Header for Mobile (Optional: If you want a header on the sheet view on mobile)
     Currently the sidebar is hidden, so we might want a small logo on the SheetView or just rely on the Chat header when opened.
     The user requirement says "Compact header with small logo". 
     Since the sidebar is now hidden, the logo is hidden too. 
     We should probably ensure the Sheet View has some branding or the sidebar header acts as a persistent top bar?
     
     The user said: "Compact header with small logo + hamburger menu" (or similar).
     However, the chat IS the sidebar.
     
     Let's implement the Bottom Sheet Chat approach logic.
  */

  /* Hide sidebar by default on mobile - NOT NEEDED as we use conditional rendering now */
  /*
  .chat-sidebar {
    ...
  }
  */

  /* Since we wrapped it in .mobile-drawer, the .chat-sidebar itself just fills the height */
  .chat-sidebar {
    width: 100%;
    height: 100%;
  }

  /*
  .chat-sidebar.mobile-open {
    transform: translateY(0);
  }
  */

  /* Chat Header Mobile Adjustments */
  .chat-header {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }

  .header-top-row {
    display: flex;
    width: 100%;
    justify-content: space-between;
    align-items: center;
  }

  /* Reduce Logo Size significantly */
  .sidebar-logo {
    max-height: 40px !important;
    min-height: 0;
    width: auto;
    padding-right: 0;
    margin-bottom: 0;
  }

  .header-controls {
    position: static;
    background: transparent;
    padding: 0;
  }

  /* Mobile Close Button */
  .mobile-close-btn {
    display: block;
    background: none;
    border: none;
    color: #9ca3af;
    font-size: 2rem;
    cursor: pointer;
    padding: 0 0.5rem;
  }

  .mobile-chat-fab {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    bottom: 90px;
    /* Moved up to avoid footer controls */
    right: 20px;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background-color: var(--primary-color);
    color: white;
    border: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    z-index: 90;
    cursor: pointer;
    transition: transform 0.2s;
  }

  .mobile-chat-fab:active {
    transform: scale(0.95);
  }

  .mobile-chat-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 95;
    backdrop-filter: blur(2px);
    animation: fadeBackdrop 0.3s;
  }

  /* Adjust typography for mobile */
  .sheet-header h1 {
    font-size: 1.8rem;
  }

  .title-input {
    font-size: 1.8rem;
  }

  .source-content {
    flex-direction: column;
    gap: 1rem;
  }

  .text-heb {
    order: 1;
    text-align: right;
  }

  .text-eng {
    order: 2;
  }

  /* Responsive prompt grid for mobile - single column */
  .empty-prompts-grid {
    grid-template-columns: 1fr !important;
    max-width: 100% !important;
    gap: 0.5rem !important;
    margin-top: 1.5rem !important;
  }

  /* Smaller prompt cards on mobile */
  .prompt-card {
    padding: 0.75rem 1rem !important;
    font-size: 0.9rem !important;
    min-height: auto !important;
    border-radius: 8px !important;
  }

  /* Improved Source Controls for Mobile */
  .source-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .source-controls {
    width: 100%;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  /* Make selects flex to fill available space comfortably */
  .version-select,
  .view-toggle {
    flex: 0 0 100%;
    /* Force full width to stack them */
    width: 100%;
    margin-bottom: 0.25rem;
    max-width: none !important;
  }
}

/* Central hero adjustments for mobile */
.central-hero {
  padding: 0 0.5rem;
  max-width: 100%;
  width: 100%;
  box-sizing: border-box;
  /* overflow: hidden; Removed to allow logo to touch edges if needed */
}

.central-hero p {
  font-size: 0.95rem;
  padding: 0;
  margin-bottom: 1.5rem;
  line-height: 1.5;
  max-width: 100%;
  word-wrap: break-word;
}

.central-logo-text {
  font-size: clamp(1.75rem, 10vw, 3rem);
  flex-wrap: nowrap;
  justify-content: center;
  width: 100%;
  margin-bottom: 1rem;
  white-space: nowrap;
}

/* Ensure sparkle doesn't force wrap or overflow */
.central-logo-text .logo-sparkle {
  margin-left: 0.2rem;
  display: inline-flex;
}

.central-logo-text .logo-sparkle svg {
  width: 0.8em;
  /* Scale relative to font size */
  height: 0.8em;
}

/* Remove image classes */

/* Hide the old SVG sparkle logic essentially by ignoring it if we remove the DOM elements */

/* Central textarea mobile */
.central-textarea {
  min-height: 70px;
  padding: 14px 50px 14px 16px;
  font-size: 1rem;
  border-radius: 16px;
}

/* Hide initial toggles and let them appear inside sheet-view on mobile */
.initial-toggles {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  z-index: 10;
}

.initial-theme-toggle {
  width: 32px;
  height: 32px;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 50%;
}

[data-theme='dark'] .initial-theme-toggle {
  background: rgba(255, 255, 255, 0.1);
}

/* Footer mobile */
.sheet-footer {
  padding: 1.5rem 1rem;
}

.sheet-footer p {
  font-size: 0.85rem;
}

.footer-legal {
  font-size: 0.75rem;
}


/* Extra small screens (narrow phones) */
@media (max-width: 400px) {
  .central-logo-text {
    font-size: 11vw;
    /* Fallback for very small screens */
  }

  .central-logo-text .logo-sparkle svg {
    width: 24px;
    height: 24px;
  }

  .central-hero p {
    font-size: 0.9rem;
  }

  .empty-prompts-grid {
    gap: 0.4rem !important;
  }

  .prompt-card {
    padding: 0.6rem 0.8rem !important;
    font-size: 0.85rem !important;
  }
}

/* Desktop styles for new elements */
@media (min-width: 769px) {

  .mobile-chat-fab,
  .mobile-close-btn,
  .mobile-chat-backdrop {
    display: none !important;
  }
}

@keyframes fadeBackdrop {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

/* Drag and Drop & Export Styles */

.header-actions {
  margin-top: 1rem;
}

.export-btn {
  background-color: var(--primary-color);
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
  transition: opacity 0.2s;
}

.google-btn {
  background: #4285F4;
  /* Google Blue */
  margin-right: 0.5rem;
}

.google-btn:disabled {
  background: #a0c3ff;
  cursor: not-allowed;
}

.export-btn:hover {
  background-color: #2563eb;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 0.8rem;
}

.drag-handle {
  touch-action: none;
  cursor: grab;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.2rem;
  border-radius: 4px;
  transition: background 0.2s;
}

.drag-handle:hover {
  background-color: #f3f4f6;
}

.drag-handle:active {
  cursor: grabbing;
}

.source-header h3 {
  margin: 0;
}

.sortable-item {
  /* Allow scrolling on the item itself */
  touch-action: manipulation;
}

/* Text Logo */
.sidebar-logo-text {
  display: flex;
  align-items: center;
  font-size: 2rem;
  /* Larger as requested */
  line-height: 1;
  gap: 2px;
  user-select: none;
  cursor: pointer;
  padding-right: 1rem;
  /* breathing room */
}

.logo-serif {
  font-family: var(--font-english-serif);
  font-weight: 700;
  color: var(--sidebar-text);
  letter-spacing: -0.01em;
}

.logo-sans {
  font-family: var(--font-ui);
  font-weight: 700;
  background: linear-gradient(90deg, #4285F4, #9B72CB, #D96570);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-right: 4px;
}

.logo-sparkle {
  display: flex;
  align-items: center;
  margin-top: -6px;
  /* Lift star */
}

/* Central Big Logo */
.central-logo-text {
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 4.5rem;
  margin-bottom: 1rem;
  user-select: none;
}

.central-logo-text .logo-serif {
  font-family: var(--font-english-serif);
  /* Consistent brand font */
  color: var(--sheet-text);
  /* Adapt to theme */
}

.central-logo-text .logo-sparkle svg {
  width: 48px;
  height: 48px;
}

.central-logo-text .logo-hebrew {
  font-family: var(--font-hebrew);
  font-weight: 700;
  direction: rtl;
}


/* Title Input & Export Links */
.sheet-controls-row {
  display: flex;
  justify-content: center;
  width: 100%;
  margin-bottom: 1.5rem;
}

.sheet-divider-line {
  border-bottom: 1px solid var(--border-color);
  width: 100%;
  max-width: 800px;
  margin: 0 auto 2rem auto;
}

.title-input {
  font-family: 'Frank Ruhl Libre', serif;
  font-size: 3rem;
  /* Even larger title */
  color: var(--sheet-text);
  text-align: center;
  border: none;
  border-bottom: 2px solid transparent;
  background: transparent;
  width: 100%;
  max-width: 900px;
  outline: none;
  padding: 0.5rem;
  transition: border-color 0.2s;
  margin-bottom: 0;
  /* Reduced from 1rem */
}

.title-input:focus {
  border-bottom-color: var(--primary-color);
}

.export-success-msg {
  margin: 1rem 0;
  padding: 1rem;
  background-color: #ecfdf5;
  border: 1px solid #10b981;
  border-radius: 8px;
  animation: fadeIn 0.5s;
}

.open-doc-link {
  color: #059669;
  font-weight: bold;
  font-size: 1.1rem;
  text-decoration: none;
}

.open-doc-link:hover {
  text-decoration: underline;
}

/* Central Input (SheetView Empty State) */
.central-hero {
  text-align: center;
  margin-bottom: 2rem;
  width: 100%;
  max-width: 800px;
  margin: 0 auto 3rem auto;
}

.central-hero h2 {
  font-family: var(--font-ui);
  /* Use sans-serif like Gemini */
  font-size: 3rem;
  /* Larger greeting */
  font-weight: 500;
  margin-bottom: 0.5rem;
  color: #444746;
  /* Gemini dark gray */
  background: linear-gradient(90deg, #4285F4, #9B72CB, #D96570);
  /* Subtle gradient text? Optional, maybe keep simple */
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  display: inline-block;
  letter-spacing: -0.02em;
}

[data-theme='dark'] .central-hero h2 {
  background: linear-gradient(90deg, #8AB4F8, #C58AF9, #F28B82);
  -webkit-background-clip: text;
  background-clip: text;
}

.central-hero p {
  font-size: 1.25rem;
  color: #5f6368;
  margin-bottom: 2.5rem;
  font-weight: 300;
}

[data-theme='dark'] .central-hero p {
  color: #9aa0a6;
}

.central-input-wrapper {
  position: relative;
  width: 100%;
  max-width: 900px;
  margin: 0 auto;
}

.central-textarea {
  width: 100%;
  min-height: 90px;
  /* Taller: ~3 lines visible */
  padding: 2rem;
  box-sizing: border-box;
}

.gemini-greeting {
  font-size: 3rem;
  font-weight: 500;
  color: #c4c7c5;
  /* Muted gray for greeting */
  background: linear-gradient(to right, #4285f4, #d96570);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  margin: 0 0 0.5rem 0;
  text-align: center;
  letter-spacing: -0.02em;
}

.gemini-headline {
  font-size: 3rem;
  font-weight: 500;
  color: #444746;
  /* Darker gray for headline */
  margin: 0 0 3rem 0;
  text-align: center;
  letter-spacing: -0.02em;
}

[data-theme='dark'] .gemini-headline {
  color: #e3e3e3;
}

/* Gemini Input Bar */
.central-input-wrapper {
  width: 100%;
  position: relative;
  margin-bottom: 2rem;
}

.gemini-input-box {
  width: 100%;
  background: var(--input-bg);
  border: 1px solid transparent;
  /* No border usually, just shadow? or subtle border */
  border-radius: 24px;
  /* Pill shape - actually rectangular with rounded corners */
  padding: 1.25rem 1.5rem 3.5rem 1.5rem;
  /* Extra bottom padding for buttons */
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.05);
  /* Subtle border+shadow */
  position: relative;
  transition: box-shadow 0.2s;
  display: flex;
  flex-direction: column;
}

.gemini-input-box:focus-within {
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.1);
  background: var(--sheet-bg);
}

.central-textarea {
  border: none;
  background: transparent;
  width: 100%;
  resize: none;
  font-size: 1.1rem;
  line-height: 1.5;
  color: var(--sheet-text);
  outline: none;
  padding: 0;
  margin: 0;
  min-height: 24px;
}

.input-actions {
  position: absolute;
  bottom: 0.75rem;
  right: 1rem;
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

.central-send-btn {
  background: transparent;
  color: var(--sheet-text);
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.2s;
}

.central-send-btn:hover:not(:disabled) {
  background: rgba(0, 0, 0, 0.05);
}

.central-send-btn:disabled {
  color: #1f1f1f;
}

[data-theme='dark'] .central-send-btn {
  color: #e3e3e3;
}

[data-theme='dark'] .central-send-btn:not(:disabled):hover {
  background-color: rgba(227, 227, 227, 0.08);
}

/* Ensure padding doesn't break width */
.chat-textarea,
.central-textarea {
  box-sizing: border-box;
}

/* Gemini-style Suggestion Cards (Grid Layout) */
.empty-prompts-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.75rem;
  margin: 2rem auto 0 auto;
  width: 100%;
  max-width: 700px;
  /* Narrower grid */
}

.prompt-card {
  background-color: #f0f4f9;
  /* Solid fill for better button affordance */
  border: 1px solid transparent;
  color: #1f1f1f;
  padding: 0.75rem 1rem;
  /* Reduced padding */
  border-radius: 10px;
  cursor: pointer;
  text-align: left;
  transition: all 0.2s cubic-bezier(0.2, 0.0, 0, 1.0);
  font-size: 0.95rem;
  /* Smaller text */
  font-weight: 500;
  line-height: 1.4;
  display: flex;
  align-items: center;
  min-height: auto;
  /* Remove fixed height */
  position: relative;
  overflow: hidden;
}

.prompt-card:hover {
  background-color: #e2e7eb;
  /* Distinct hover state */
  border-color: transparent;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
}

/* Remove old Icon styles */
.prompt-icon {
  display: none;
}

[data-theme='dark'] .prompt-card {
  background-color: #1e1f20;
  border-color: #444746;
  color: #e3e3e3;
}

[data-theme='dark'] .prompt-card:hover {
  background-color: #282a2c;
  border-color: #5f6368;
}

.prompt-card span:nth-child(2) {
  font-weight: normal;
  /* Reset if needed */
}

/* Export Dropdown */
.export-menu-container {
  position: relative;
  display: inline-block;
}

.export-main-btn {
  background-color: var(--primary-color);
  color: white;
  border: none;
  padding: 0.6rem 1.2rem;
  border-radius: 6px;
  cursor: pointer;
  font-family: inherit;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: background-color 0.2s;
}

.export-main-btn:hover {
  background-color: #2563eb;
}

.export-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 0.5rem;
  background-color: white;
  min-width: 180px;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  border-radius: 6px;
  border: 1px solid #e5e7eb;
  z-index: 50;
  overflow: hidden;
  animation: fadeIn 0.15s ease-out;
}

.export-dropdown button {
  display: block;
  width: 100%;
  padding: 0.75rem 1rem;
  text-align: left;
  background: none;
  border: none;
  color: #374151;
  font-size: 0.9rem;
  cursor: pointer;
  transition: background-color 0.1s;
}

/* Sheet Footer Styles */
.sheet-footer {
  text-align: center;
  padding: 2rem 1rem;
  margin-top: auto;
  color: var(--sheet-text);
}

/* Line 1: Attribution - largest, most prominent */
.footer-attribution {
  margin: 0 0 0.4rem 0;
  font-size: 0.9rem;
  color: #6b7280;
}

[data-theme='dark'] .footer-attribution {
  color: #9ca3af;
}

/* Line 2: Powered by Sefaria - medium size */
.footer-powered {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.3rem;
  font-size: 0.9rem;
  color: #9ca3af;
  margin-bottom: 0.3rem;
}

.footer-powered a {
  color: #9ca3af;
  text-decoration: none;
  transition: color 0.2s;
}

.footer-powered a:hover {
  color: var(--primary-color);
  text-decoration: underline;
}

[data-theme='dark'] .footer-powered,
[data-theme='dark'] .footer-powered a {
  color: #6b7280;
}

.version-tag {
  color: #9ca3af;
}

[data-theme='dark'] .version-tag {
  color: #6b7280;
}

/* Line 3: Legal links - smallest, most subtle */
.footer-legal {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  gap: 0.4rem;
  font-size: 0.65rem;
  color: #b0b5bc;
}

.footer-legal a {
  color: #b0b5bc;
  text-decoration: none;
  transition: color 0.2s;
}

.footer-legal a:hover {
  color: var(--primary-color);
  text-decoration: underline;
}

[data-theme='dark'] .footer-legal,
[data-theme='dark'] .footer-legal a {
  color: #4b5563;
}

.empty-content-msg {
  padding: 1rem;
  background-color: #f9fafb;
  border: 1px dashed #d1d5db;
  border-radius: 6px;
  color: #6b7280;
  font-style: italic;
  text-align: center;
  margin-bottom: 0.5rem;
}

/* Initial Toggles Container */
.initial-toggles {
  position: absolute;
  top: 1.5rem;
  right: 140px;
  /* Moved left to avoid Sign In button */
  display: flex;
  gap: 0.5rem;
  z-index: 50;
  direction: ltr;
  /* Prevent button swap in RTL mode */
}

.initial-theme-toggle {
  background: transparent;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #5f6368;
  transition: background-color 0.2s;
  position: static;
}

[data-theme='dark'] .initial-theme-toggle {
  color: #e3e3e3;
}

.initial-theme-toggle:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

[data-theme='dark'] .initial-theme-toggle:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

html[dir="rtl"] .prompt-card {
  text-align: right;
}

/* Mobile Logo Fix Override */
@media (max-width: 768px) {
  .central-logo-text {
    font-size: 13vw !important;
    flex-wrap: nowrap !important;
    white-space: nowrap !important;
  }

  .central-logo-text .logo-serif,
  .central-logo-text .logo-sans {
    font-size: inherit !important;
  }
}

/* Toast Notification System */
.toast-container {
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 12px;
  pointer-events: none;
}

.toast {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 20px;
  border-radius: 12px;
  background: #1f2937;
  color: white;
  font-size: 0.95rem;
  font-weight: 500;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
  animation: slideIn 0.3s ease-out;
  pointer-events: auto;
  max-width: 400px;
}

.toast-success {
  background: linear-gradient(135deg, #059669, #10b981);
}

.toast-error {
  background: linear-gradient(135deg, #dc2626, #ef4444);
}

.toast-info {
  background: linear-gradient(135deg, #1d4ed8, #3b82f6);
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }

  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@media (max-width: 768px) {
  .toast-container {
    left: 16px;
    right: 16px;
    bottom: 80px;
  }

  .toast {
    max-width: 100%;
  }
}

/* Undo/Redo Controls */
.undo-redo-container {
  display: flex;
  gap: 4px;
  margin-left: 8px;
}

.undo-redo-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 8px;
  border: 1px solid var(--border-color);
  background: var(--sheet-bg);
  color: var(--sheet-text);
  cursor: pointer;
  transition: all 0.15s ease;
}

.undo-redo-btn:hover:not(:disabled) {
  background: var(--primary-color);
  color: white;
  border-color: var(--primary-color);
}

.undo-redo-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.undo-redo-btn svg {
  width: 18px;
  height: 18px;
}

/* New Sheet Button */
.new-sheet-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  border-radius: 8px;
  border: 1px solid var(--border-color);
  background: var(--sheet-bg);
  color: var(--sheet-text);
  font-size: 0.85rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  margin-left: 8px;
}

.new-sheet-btn:hover {
  background: var(--primary-color);
  color: white;
  border-color: var(--primary-color);
}

.new-sheet-btn svg {
  width: 16px;
  height: 16px;
}

@media (max-width: 768px) {
  .new-sheet-btn span {
    display: none;
  }

  .new-sheet-btn {
    padding: 8px;
  }
}

/* --- Custom Blocks & Headers --- */
.custom-source-block {
  border-left: 4px solid #f59e0b;
}

.custom-title-input-wrapper {
  flex: 1;
  margin-left: 1rem;
}

.custom-source-title {
  width: 100%;
  border: none;
  background: transparent;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--sheet-text);
  outline: none;
  border-bottom: 1px dashed transparent;
}

.custom-source-title:focus {
  border-bottom: 1px dashed var(--primary-color);
}

.custom-text-content {
  min-height: 2em;
  padding: 0.5rem;
  background: rgba(0, 0, 0, 0.02);
  border-radius: 4px;
}

.section-header-block {
  position: relative;
  padding: 0.5rem 0;
}

.section-header-block:hover .remove-btn {
  opacity: 1;
}

.section-header-input {
  width: 100%;
  font-size: 1.5rem;
  font-family: var(--font-english-serif);
  font-weight: bold;
  border: none;
  border-bottom: 2px solid var(--primary-color);
  background: transparent;
  color: var(--sheet-text);
  padding: 0.5rem 0;
  outline: none;
}

/* --- Add Block Menu --- */
.add-block-menu {
  display: flex;
  justify-content: center;
  margin: 1rem 0;
}

.add-block-buttons {
  display: flex;
  gap: 0.5rem;
  background: var(--bg-paper);
  padding: 0.25rem;
  border-radius: 20px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  border: 1px solid var(--border-color);
}

.add-block-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: transparent;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 16px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--text-secondary);
  transition: all 0.2s;
}

.add-block-btn:hover {
  background: var(--bg-hover);
  color: var(--primary-color);
}

.add-block-btn svg {
  opacity: 0.7;
}

@media print {

  .sheet-toolbar,
  .custom-source-title,
  .section-header-input {
    border-bottom: none !important;
  }

  .custom-source-title,
  .section-header-input {
    background: transparent !important;
  }
}

/* Sheet View (Right Pane) */
.sheet-view {
  flex: 1;
  background-color: var(--sheet-bg);
  /* The paper background */
  overflow-y: auto;
  position: relative;
  display: flex;
  flex-direction: column;
  color: var(--sheet-text);
  /* Scroll behavior */
  scroll-behavior: smooth;
}

.sheet-header {
  padding: 1.5rem 3rem 0.5rem 3rem;
  background: transparent;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  flex-shrink: 0;
}

.title-input {
  font-family: var(--font-english-serif);
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--sheet-text);
  border: none;
  background: transparent;
  text-align: center;
  width: 100%;
  padding: 0.5rem;
  margin-top: 1rem;
  outline: none;
  transition: border-color 0.2s;
}

.title-input:hover,
.title-input:focus {
  background: rgba(0, 0, 0, 0.02);
  border-radius: 8px;
}

.title-input::placeholder {
  color: var(--border-color);
  opacity: 0.6;
}

/* Sidebar Container & Transitions */
.chat-sidebar-wrapper {
  height: 100vh;
  background-color: var(--bg-paper);
  border-right: 1px solid var(--border-color);
  display: flex;
  flex-direction: column;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  z-index: 50;
  overflow: hidden;
}

.chat-sidebar-wrapper.closed {
  width: 0 !important;
  min-width: 0 !important;
  opacity: 0;
  border-right: none;
}

/* Hamburger Menu Button */
.main-hamburger-btn {
  position: absolute;
  top: 1.5rem;
  left: 1.5rem;
  z-index: 100;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  color: var(--sidebar-text);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.2s;
}

.main-hamburger-btn:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.main-hamburger-btn svg {
  width: 24px;
  height: 24px;
}

/* Hide desktop sidebar on mobile */
@media (max-width: 768px) {
  .desktop-sidebar {
    display: none !important;
  }

  /* Mobile Drawer Styles */
  .mobile-drawer {
    position: fixed !important;
    top: 0;
    left: 0;
    height: 100vh !important;
    width: 85vw !important;
    /* Slightly less than full width */
    max-width: 400px;
    z-index: 150 !important;
    box-shadow: 2px 0 16px rgba(0, 0, 0, 0.2);
    display: flex !important;
    /* Force display since we conditionally render */
    border-right: none;
    animation: slideInLeft 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    background-color: var(--sidebar-bg);
    /* Ensure opaque background */
  }
}

@keyframes slideInLeft {
  from {
    transform: translateX(-100%);
  }

  to {
    transform: translateX(0);
  }
}

/* Mobile Chat Backdrop */
.mobile-chat-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 140;
  /* Below drawer (150) */
  backdrop-filter: blur(2px);
  animation: fadeIn 0.3s;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

/* Adjust SheetView to accommodate hamburger */
.sheet-view {
  position: relative;
  transition: padding-left 0.3s;
}

/* Ensure Logo in SheetView doesn't overlap hamburger if sidebar is closed */
/* Actually hamburger is on top left, replacing logo location.
   If sidebar is closed, hamburger opens it.
   If sidebar is open, hamburger closes it?
   Gemini has hamburger INSIDE sidebar usually, or stays in place.
   I'll keep it fixed in App Container top-left.
*/

/* Toolbar Styling */
.sheet-toolbar {
  display: flex;
  align-items: center;
  gap: 1rem;
  background: var(--bg-paper);
  padding: 0.5rem 1rem;
  border-radius: 50px;
  border: 1px solid var(--border-color);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  margin-bottom: 2rem;
}

.toolbar-group {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.toolbar-btn {
  background: transparent;
  border: 1px solid transparent;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 8px 16px;
  border-radius: 8px;
  font-size: 0.9rem;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: all 0.2s;
}

.primary-action-btn {
  background-color: rgba(var(--primary-rgb), 0.1);
  color: var(--primary-color);
  border-radius: 20px;
}

.primary-action-btn:hover {
  background-color: rgba(var(--primary-rgb), 0.2);
  transform: translateY(-1px);
}

.subtle-btn {
  padding: 8px;
  border-radius: 50%;
  color: #9ca3af;
}

.subtle-btn:hover {
  background-color: rgba(0, 0, 0, 0.05);
  color: var(--text-primary);
}

.toolbar-divider {
  width: 1px;
  height: 24px;
  background-color: var(--border-color);
  margin: 0 0.5rem;
}

/* Sidebar Tabs - Segmented Control Style */
.sidebar-tabs {
  display: flex;
  background: var(--border-color);
  border-radius: 8px;
  padding: 4px;
  margin: 1rem 1rem 0 1rem;
  gap: 4px;
}

.sidebar-tab {
  flex: 1;
  background: transparent;
  border: none;
  padding: 0.6rem 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--sidebar-text);
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.15s ease;
}

.sidebar-tab.active {
  background: var(--sheet-bg);
  color: var(--sheet-text);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.sidebar-tab:hover:not(.active) {
  background: rgba(0, 0, 0, 0.05);
}

/* History List */
.history-list {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
}

.history-item {
  padding: 0.75rem;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s;
  margin-bottom: 0.5rem;
  border: 1px solid transparent;
}

.history-item:hover {
  background: var(--bg-hover);
}

.history-item.active {
  background: var(--bg-secondary);
  border-color: var(--primary-color);
}

.history-title {
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 0.25rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.history-meta {
  font-size: 0.75rem;
  color: var(--text-secondary);
}

.empty-history {
  text-align: center;
  color: var(--text-secondary);
  padding: 2rem 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

/* --- Phase 4: Home & Dashboard Styles --- */

.home-container {
  min-height: 100vh;
  background-color: var(--bg-primary);
  display: flex;
  flex-direction: column;
}

.home-header {
  padding: 1.5rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.dashboard-header {
  padding: 1rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid var(--border-color);
  background-color: var(--bg-paper);
}

.landing-hero {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 2rem;
  background: radial-gradient(circle at 50% 30%, var(--bg-secondary) 0%, var(--bg-primary) 70%);
}

.hero-content h2 {
  font-size: 3rem;
  font-weight: 700;
  margin-bottom: 1rem;
  color: var(--text-primary);
  background: linear-gradient(135deg, var(--primary-color), #8e44ad);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

.hero-subtitle {
  font-size: 1.25rem;
  color: var(--text-secondary);
  max-width: 600px;
  margin-bottom: 2.5rem;
  line-height: 1.6;
}

.cta-button {
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.85rem 2rem;
  font-size: 1.1rem;
  font-weight: 600;
  border-radius: 50px;
  border: none;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}

.google-login {
  background-color: white;
  /* Always white for Google branding */
  color: #333;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.google-login:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
}

.new-sheet-btn {
  background-color: var(--primary-color);
  color: white;
  box-shadow: 0 4px 12px rgba(var(--primary-rgb), 0.3);
}

.new-sheet-btn:hover {
  background-color: var(--primary-hover);
  transform: translateY(-2px);
}

/* Dashboard Grid */
.dashboard-content {
  padding: 2rem 3rem;
  max-width: 1200px;
  margin: 0 auto;
  width: 100%;
}

.welcome-section {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 3rem;
}

.sheets-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 1.5rem;
  margin-top: 1.5rem;
}

.sheet-card {
  background: var(--bg-paper);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  flex-direction: column;
  height: 200px;
}

.sheet-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
  border-color: var(--primary-color);
}

.sheet-card-preview {
  flex: 1;
  background-color: var(--bg-secondary);
  padding: 1rem;
  position: relative;
  /* Abstract lines for preview */
}

.preview-lines {
  height: 8px;
  width: 80%;
  background-color: var(--border-color);
  border-radius: 4px;
  margin-bottom: 8px;
  opacity: 0.5;
}

.preview-lines:nth-child(2) {
  width: 60%;
}

.sheet-card-footer {
  padding: 1rem;
  border-top: 1px solid var(--border-color);
  background-color: var(--bg-paper);
}

.sheet-title {
  font-size: 1rem;
  font-weight: 600;
  margin: 0 0 0.25rem 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--text-primary);
}

.sheet-date {
  font-size: 0.8rem;
  color: var(--text-secondary);
}

.user-profile .avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 2px solid var(--primary-color);
}

/* Improved History List Styling */
.history-list {
  padding: 0.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.history-item {
  padding: 12px 16px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.2s;
  color: var(--sheet-text);
  border: 1px solid transparent;
  background-color: transparent;
}

.history-item:hover {
  background-color: rgba(0, 0, 0, 0.04);
}

[data-theme='dark'] .history-item:hover {
  background-color: rgba(255, 255, 255, 0.08);
}

.history-item.active {
  background-color: var(--primary-light-bg, rgba(59, 130, 246, 0.1));
  color: var(--primary-color);
  font-weight: 500;
}

.history-title {
  font-size: 1rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 2px;
}

.history-meta {
  font-size: 0.8rem;
  color: #9ca3af;
}

/* Sidebar Toggle Fixes */
.sidebar-toggle-btn:hover {
  background-color: rgba(0, 0, 0, 0.05) !important;
}

[data-theme='dark'] .sidebar-toggle-btn:hover {
  background-color: rgba(255, 255, 255, 0.1) !important;
}

/* New Chat Button Hover */
.new-chat-btn-sidebar {
  background: linear-gradient(135deg, #8b5cf6 0%, #f97316 100%) !important;
  color: white !important;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  border: none;
  font-weight: 600;
  transition: all 0.2s ease;
}

.new-chat-btn-sidebar:hover {
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
  transform: translateY(-1px);
  filter: brightness(1.05);
}

/* Central Logo */
.central-logo-hero {
  font-family: var(--font-english-serif);
  font-size: 3rem;
  background: linear-gradient(135deg, #8b5cf6 0%, #f97316 100%);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 0.5rem;
  letter-spacing: -0.03em;
  font-weight: 700;
}

/* Suggestion Cards - 3 Column Grid (Modern AI Aesthetic) */
.gemini-suggestions {
  display: grid !important;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.75rem;
  margin: 2rem auto 0 auto;
  /* Center horizontally */
  width: 100%;
  max-width: 700px;
  /* Match input box width */
}

@media (max-width: 768px) {
  .gemini-suggestions {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 500px) {
  .gemini-suggestions {
    grid-template-columns: 1fr;
  }
}

/* Hero Logo Image */
.hero-logo-img {
  max-width: 400px;
  height: auto;
  margin-bottom: 2rem;
  transition: opacity 0.3s;
}

/* Modern AI-Style Suggestion Cards */
.gemini-pill {
  border-radius: 12px !important;
  padding: 1rem 1.25rem !important;
  font-family: var(--font-ui);
  font-size: 0.9rem !important;
  font-weight: 400 !important;
  line-height: 1.5;
  color: #334155;
  /* Slate 700 - readable */
  background: #f8fafc;
  /* Slate 50 - very light */
  border: 1px solid #e2e8f0;
  /* Slate 200 - subtle border */
  box-shadow: none;
  transition: all 0.15s ease-out;
  text-align: left;
  display: flex !important;
  justify-content: flex-start;
  align-items: flex-start;
  min-height: auto;
  cursor: pointer;
}

.gemini-pill:hover {
  background: #f1f5f9;
  /* Slate 100 */
  border-color: #cbd5e1;
  /* Slate 300 */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
}

.gemini-pill:active {
  transform: scale(0.98);
}

/* Remove cheesy icon */
.pill-icon {
  display: none !important;
}

.pill-text {
  width: 100%;
}

[data-theme='dark'] .gemini-pill {
  background: #1e293b;
  /* Slate 800 */
  color: #e2e8f0;
  /* Slate 200 */
  border-color: #334155;
  /* Slate 700 */
}

[data-theme='dark'] .gemini-pill:hover {
  background: #334155;
  border-color: #475569;
}

/* Sidebar Logo Adjustment */
.sidebar-logo-text {
  /* Gradient text for brand */
  background: linear-gradient(135deg, #8b5cf6 0%, #f97316 100%);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}